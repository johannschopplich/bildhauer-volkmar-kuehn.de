@layer foundations {
  :root {
    --un-fluid-min-width: 320;
    --un-fluid-max-width: 1140;
    --un-fluid-screen: 100vw;
    --un-fluid-bp: calc(
      (var(--un-fluid-screen) - var(--un-fluid-min-width) / 16 * 1rem) /
        (var(--un-fluid-max-width) - var(--un-fluid-min-width))
    );

    --un-font-family-normal: "Jost", ui-sans-serif, system-ui, sans-serif;
    --un-font-family-heading: "Silverknife", ui-serif, serif;
    --un-line-height-normal: 1.6;
    --un-line-height-heading: 1.25;

    --un-text-scale-ratio: 1.333;
    --un-text-lg: calc(1rem * var(--un-text-scale-ratio));
    --un-text-xl: calc(var(--un-text-lg) * var(--un-text-scale-ratio));
    --un-text-2xl: calc(var(--un-text-xl) * var(--un-text-scale-ratio));
    --un-text-3xl: calc(var(--un-text-2xl) * var(--un-text-scale-ratio));
    --un-text-4xl: calc(var(--un-text-3xl) * var(--un-text-scale-ratio));

    --un-fluid-min-font-size: 16;
    --un-fluid-max-font-size: 18;
    --un-prose-space-y: 1.5rem;

    --un-decoration-color: var(--un-color-primary);
    --un-decoration-thickness: max(1px, 0.05em);
    --un-decoration-offset: max(2px, 0.15em);

    /* Primary color palette (warm brown/tan) */
    --un-color-primary: oklch(66.6% 0.042 72); /* #A59078 */
    --un-color-primary-50: oklch(97% 0.0101 76); /* #F9F4EE */
    --un-color-primary-100: oklch(94% 0.0139 76); /* #F1EAE1 */
    --un-color-primary-200: oklch(87.5% 0.0218 75); /* #DFD4C6 */
    --un-color-primary-300: oklch(77.5% 0.0328 74); /* #C3B39F */
    --un-color-primary-400: oklch(66.6% 0.042 72); /* #A59078 */
    --un-color-primary-500: oklch(56% 0.0441 70); /* #867058 */
    --un-color-primary-600: oklch(47% 0.0399 69); /* #6A5743 */
    --un-color-primary-700: oklch(39% 0.0349 67); /* #524231 */
    --un-color-primary-800: oklch(31% 0.0273 66); /* #3A2E22 */
    --un-color-primary-900: oklch(24% 0.021 65); /* #261D15 */

    /* Accent color palette (slate blue) */
    --un-color-accent: oklch(34.5% 0.0504 270); /* #2F3854 */
    --un-color-accent-50: oklch(96.5% 0.0101 262); /* #F0F4FA */
    --un-color-accent-100: oklch(93% 0.017 263); /* #E2E8F4 */
    --un-color-accent-200: oklch(86.5% 0.0271 264); /* #CAD3E5 */
    --un-color-accent-300: oklch(77.5% 0.0422 266); /* #A9B6D2 */
    --un-color-accent-400: oklch(67.5% 0.0548 267); /* #8896B9 */
    --un-color-accent-500: oklch(59.2% 0.063 267); /* #6D7DA4 */
    --un-color-accent-600: oklch(50% 0.0599 268); /* #546286 */
    --un-color-accent-700: oklch(42% 0.0554 269); /* #414C6C */
    --un-color-accent-800: oklch(34.5% 0.0504 270); /* #2F3854 */
    --un-color-accent-900: oklch(26% 0.041 271); /* #1D2338 */

    --tw-color-stone-50: oklch(0.985 0.001 106.423);
    --tw-color-stone-100: oklch(0.97 0.001 106.424);
    --tw-color-stone-200: oklch(0.923 0.003 48.717);
    --tw-color-stone-300: oklch(0.869 0.005 56.366);
    --tw-color-stone-400: oklch(0.709 0.01 56.259);
    --tw-color-stone-500: oklch(0.553 0.013 58.071);
    --tw-color-stone-600: oklch(0.444 0.011 73.639);
    --tw-color-stone-700: oklch(0.374 0.01 67.558);
    --tw-color-stone-800: oklch(0.268 0.007 34.298);
    --tw-color-stone-900: oklch(0.216 0.006 56.043);
    --tw-color-stone-950: oklch(0.147 0.004 49.25);
  }

  @media screen and (min-width: 1140px) {
    :root {
      --un-fluid-screen: calc(var(--un-fluid-max-width) * 1px);
    }
  }

  :root:not([data-theme]),
  [data-theme="light"] {
    --un-color-contrast-lowest: var(--tw-color-stone-100);
    --un-color-contrast-lower: var(--tw-color-stone-200);
    --un-color-contrast-low: var(--tw-color-stone-300);
    --un-color-contrast-soft: var(--tw-color-stone-400);
    --un-color-contrast-medium: var(--tw-color-stone-500);
    --un-color-contrast-high: var(--tw-color-stone-800);
    --un-color-contrast-higher: var(--tw-color-stone-900);

    --un-color-background: #fafaf9;
    --un-color-text: var(--un-color-contrast-higher);
    --un-color-border: currentcolor;
    --un-color-link: var(--un-color-text);
    --un-color-link-hover: var(--un-color-primary-500);
  }

  [data-theme="dark"] {
    --un-color-contrast-lowest: var(--tw-color-stone-800);
    --un-color-contrast-lower: var(--tw-color-stone-700);
    --un-color-contrast-low: var(--tw-color-stone-600);
    --un-color-contrast-soft: var(--tw-color-stone-500);
    --un-color-contrast-medium: var(--tw-color-stone-400);
    --un-color-contrast-high: var(--tw-color-stone-100);
    --un-color-contrast-higher: var(--tw-color-stone-50);

    --un-color-background: var(--tw-color-stone-900);
    --un-color-text: white;
    --un-color-border: var(--un-color-contrast-lower);
    --un-color-link: var(--un-color-text);
    --un-color-link-hover: var(--un-color-primary-400);
  }

  [data-theme]:not(:root) {
    color: var(--un-color-text);
    background-color: var(--un-color-background);
  }

  /* Sidebar theme overrides */
  #sidebar {
    background-color: var(--un-color-background);

    @media (--below-md) {
      --un-color-link-hover: var(--un-color-accent-700);
    }

    @media (--md) {
      --un-color-background: var(--un-color-primary-700);
      --un-color-text: white;
      --un-color-link: var(--un-color-text);
      --un-color-link-hover: var(--un-color-primary-200);
    }
  }

  html {
    min-width: calc(1px * var(--un-fluid-min-width));
    font-size: calc(
      ((var(--un-fluid-min-font-size, 16) / 16) * 1rem) +
        (
          var(--un-fluid-max-font-size, 18) - var(--un-fluid-min-font-size, 16)
        ) *
        var(--un-fluid-bp)
    );
    background-color: var(--un-color-background, white);
    background-image:
      linear-gradient(#a5907815 1px, transparent 1px),
      linear-gradient(to right, #a5907815 1px, var(--un-color-background) 1px);
    background-size: 20px 20px;
    background-position:
      0 0,
      10px 10px;
    overflow-x: hidden;
    overflow-y: scroll;
  }

  body {
    font-family: var(--un-font-family-normal);
    line-height: var(--un-line-height-normal);
    color: var(--un-color-text);
  }

  svg:not([fill]) {
    fill: currentcolor;
  }

  button {
    touch-action: manipulation;
  }

  ::selection {
    color: black;
    background: var(--un-color-primary-200);
  }

  :focus:not(:focus-visible) {
    outline: none;
  }

  :focus-visible {
    outline: 2px solid currentcolor;
    outline-offset: 2px;
  }

  a {
    color: var(--un-color-link);
    text-decoration-line: none;
  }

  a:hover {
    color: var(--un-color-link-hover);
  }

  a:not([class]),
  .link-default {
    text-decoration-line: underline;
    text-decoration-style: solid;
    text-decoration-color: var(--un-decoration-color, transparent);
    text-decoration-thickness: var(--un-decoration-thickness);
    text-underline-offset: var(--un-decoration-offset);

    &:hover {
      text-decoration-color: currentcolor;
    }
  }
}
